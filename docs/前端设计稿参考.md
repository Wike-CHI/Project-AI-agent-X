# PDNS AI伴侣应用 - 前端UI设计参考方案

## 1. 设计定位

### 1.1 核心设计关键词
- **温暖** - 情感化的视觉语言
- **沉浸** - 专注于对话和伴侣互动的体验
- **通透** - 清晰的信息层级和呼吸感
- **自然** - 流畅的动效和自然的交互

### 1.2 风格定位
| 属性 | 定义 |
|-----|------|
| 圆角 | 12px - 24px (柔和友好的视觉感受) |
| 阴影 | 柔和的环境光阴影 (elevation-based) |
| 透明度 | 适度的磨砂玻璃效果 (backdrop-blur) |
| 动效 | 弹簧物理动画 (bouncy, natural) |
| 图形语言 | 圆润的有机形状 + 渐变过渡 |

---

## 2. 色彩系统

### 2.1 主色调 (Primary Colors)
| 色板 | 色值 | 用途 |
|-----|------|------|
| Primary-500 | #6366F1 | 主按钮、选中状态 (品牌色) |
| Primary-600 | #4F46E5 | 主按钮hover |
| Primary-100 | #E0E7FF | 浅色背景 |
| Primary-200 | #C7D2FE | 边框、分割线 |

### 2.2 伴侣情绪色 (Emotion Colors)
| 情绪 | 色值 | 场景 |
|-----|------|------|
| 开心/兴奋 | #FCD34D | 积极回复、高兴情绪 |
| 平静/正常 | #6366F1 | 日常对话 |
| 关心/温暖 | #F472B6 | 共情、安慰时 |
| 思考/忙碌 | #60A5FA | 思考中、加载中 |
| 惊讶/好奇 | #A78BFA | 好奇、惊讶时 |
| 疲惫/安慰 | #34D399 | 放松、安抚时 |

### 2.3 中性色 (Neutrals) - 浅色/深色
| 名称 | 浅色 | 深色 | 用途 |
|-----|------|------|------|
| Surface-0 | #FFFFFF | #0F0F0F | 最底层背景 |
| Surface-50 | #FAFAFA | #171717 | 卡片背景 |
| Surface-100 | #F5F5F5 | #1E1E1E | 次级背景 |
| Surface-200 | #E5E5E5 | #262626 | 边框、分隔 |
| Surface-500 | #737373 | #737373 | 占位文字 |
| Surface-700 | #404040 | #D4D4D4 | 正文 |
| Surface-900 | #171717 | #FAFAFA | 标题 |

### 2.4 功能色
| 功能 | 色值 |
|-----|------|
| Success | #10B981 |
| Warning | #F59E0B |
| Error | #EF4444 |
| Info | #3B82F6 |

---

## 3. 字体与间距规范

### 3.1 字号层级
| 层级 | 字号 | 行高 | 字重 | 用途 |
|-----|------|------|------|------|
| Display | 48px | 56px | 700 | 大标题 |
| H1 | 36px | 44px | 600 | 页面主标题 |
| H2 | 28px | 36px | 600 | 区块标题 |
| H3 | 22px | 30px | 500 | 卡片标题 |
| Body | 15px | 24px | 400 | 正文默认 |
| Caption | 12px | 16px | 400 | 标签、提示 |

### 3.2 间距系统 (8px网格)
| 符号 | 像素 | 用途 |
|-----|------|------|
| xs | 4px | 紧密元素间距 |
| sm | 8px | 紧凑间距 |
| md | 16px | 标准间距 |
| lg | 24px | 区块间距 |
| xl | 32px | 大间距 |
| 2xl | 48px | 页面边距 |

### 3.3 圆角规范
| 级别 | 像素 | 使用场景 |
|-----|------|---------|
| sm | 4px | 小标签、徽章 |
| md | 8px | 输入框、小按钮 |
| lg | 12px | 卡片、弹窗 |
| xl | 16px | 大卡片、侧边栏 |
| full | 9999px | 头像、圆形按钮 |

---

## 4. 整体布局结构

### 4.1 桌面端三栏布局
```
+-----------------------------------------------------------------+
|                      顶部栏 (60px)                              |
|  Logo  |  搜索/智能助手入口  |  通知  设置                      |
+--------+---------------------+--------------------------------+
|        |                     |                                |
| 侧边栏 |      主内容区域     |   伴侣面板                     |
| 240px  |      (自适应)       |   280-360px                    |
|        |                     |                                |
| 导航   |  对话/记忆/日程/商店 |  伴侣形象+情绪+快捷操作         |
| 快速入口|                     |                                |
|        |                     |                                |
+--------+---------------------+--------------------------------+
|                      底部栏 (可选, 56px)                        |
+-----------------------------------------------------------------+
```

### 4.2 布局组件配置
```typescript
interface AppLayoutProps {
  sidebarMode: 'fixed' | 'collapsible' | 'hidden';
  sidebarWidth: number;      // 240-280px
  companionPanelMode: 'floating' | 'fixed' | 'docked' | 'hidden';
  companionPanelWidth: number; // 280-360px
  companionPosition: 'right' | 'left' | 'bottom';
  showBottomBar: boolean;
}
```

---

## 5. 核心页面UI设计方案

### 5.1 首页/对话页 (Home/Chat)

#### 布局结构
```
+-----------------------------------------------------------------+
|  欢迎区                                                          |
|  [早上好，张三] [今天有3个日程，开始对话吧]                      |
|  [日程] [记忆] [商店] [设置] [更多]                              |
+-----------------------------------------------------------------+
|  对话历史区域                                                    |
|  +---------------------------------------------------------+   |
|  | [伴侣头像] 嗨！今天过得怎么样？有什么可以帮你的？      |   |
|  +---------------------------------------------------------+   |
|                                                                 |
|           +---------------------------------------------+       |
|           | 我今天工作有点累...                        |       |
|           +---------------------------------------------+       |
|                                                                 |
|  +---------------------------------------------------------+   |
|  | [伴侣头像] 听起来你今天压力很大呢...                 |   |
|  | [情绪动画: 关心/温暖]                                |   |
|  +---------------------------------------------------------+   |
+-----------------------------------------------------------------+
|  [🎤] [📎] 输入框... [发送]                                    |
+-----------------------------------------------------------------+
```

#### 组件层级
```
HomeScreen
├── WelcomeSection
│   ├── GreetingText (动态时间问候)
│   ├── StatusSummary (日程/任务摘要)
│   └── QuickActionsGrid (快捷操作网格)
├── MessageList
│   ├── MessageBubble (用户消息)
│   └── MessageBubble (伴侣消息)
│       ├── CompanionAvatar (伴侣形象 - 动画)
│       ├── EmotionIndicator (情绪指示器)
│       ├── Content (消息内容)
│       └── SuggestedActions (建议操作)
└── ChatInputArea
    ├── VoiceButton (语音输入)
    ├── AttachmentButton (附件)
    ├── TextInput (输入框)
    └── SendButton (发送)
```

#### 关键交互状态
| 状态 | 视觉表现 |
|-----|---------|
| 思考中 | 伴侣头像轻微晃动 + 思考气泡 |
| 正在输入 | 伴侣头像聚焦 + 关注表情 |
| 情绪响应 | 头像颜色/表情变化 |
| 主动介入 | 特殊动画 + 提示音 |
| 加载中 | 骨架屏 + 脉冲动画 |

---

### 5.2 记忆管理中心页 (Memory Hub)

#### 布局结构
```
+-----------------------------------------------------------------+
|  记忆管理中心  [导入] [导出]                                    |
+-------------------+------------------------------------------------+
| 搜索过滤          |                                               |
| [搜索框]          |  +------------------------------------+       |
|                   |  | 📅 情景记忆                        |       |
| 类型筛选          |  | "1月27日聊到想学西班牙语"          |       |
| □ 情景 □ 语义     |  | 来源:对话 | 重要度:★★★            |       |
| □ 关系 □ 情感     |  | [编辑] [删除]                      |       |
|                   |  +------------------------------------+       |
| 时间筛选          |                                               |
| □ 最近 □ 更早     |  +------------------------------------+       |
|                   |  | ☕ 语义记忆                        |       |
| 情感标记          |  | "用户最喜欢美式咖啡"               |       |
| □ 重要 □ 普通     |  | 置信度:95% | [编辑] [删除]          |       |
|                   |  +------------------------------------+       |
+-------------------+------------------------------------------------+
```

#### 组件层级
```
MemoryHubScreen
├── Header (标题 + 导入导出按钮)
├── SidebarFilter
│   ├── SearchInput (搜索框)
│   ├── TypeFilter (记忆类型多选)
│   ├── TimeFilter (时间范围)
│   └── ImportanceFilter (重要程度)
└── MemoryList
    └── MemoryCard (记忆卡片)
        ├── MemoryTypeIcon (类型图标)
        ├── MemoryContent (内容摘要)
        ├── MemoryMeta (元信息)
        └── ActionButtons (编辑/删除)
```

---

### 5.3 日程管理页 (Schedule)

#### 布局结构
```
+-----------------------------------------------------------------+
|  日程管理  [+] 添加日程                                          |
+----------------+--------------------------------------------------+
| 日历           |  今日 - 1月29日 星期三                           |
|                |                                                   |
|  S M T W T F S |  +------------------------------------+           |
|                |  | 🕐 09:00-10:00 项目评审会议       |           |
|                |  | 会议室A | 参与者: 张三、李四      |           |
|  << >>         |  | [完成] [编辑]                     |           |
|                |  +------------------------------------+           |
|                |                                                   |
|                |  +------------------------------------+           |
|                |  | 🕐 14:00-15:00 代码审查           |           |
|                |  | [建议: 与15:00会议冲突]           |           |
|                |  | [建议推迟] [确认] [编辑]          |           |
|                |  +------------------------------------+           |
|                |                                                   |
|                |  +------------------------------------+           |
|                |  | 💡 智能建议                       |           |
|                |  | 两个会议只隔15分钟，建议推迟半小时|           |
|                |  | [接受建议] [暂不需要]             |           |
|                |  +------------------------------------+           |
+----------------+--------------------------------------------------+
```

#### 组件层级
```
ScheduleScreen
├── Header (标题 + 添加按钮)
├── ContentArea
│   ├── CalendarView (日历视图)
│   │   ├── WeekView (周视图)
│   │   ├── MonthView (月视图)
│   │   └── DayView (日视图)
│   └── DaySchedule (当日日程)
│       ├── TimeSlot (时间槽)
│       │   └── EventCard (事件卡片)
│       └── ProactiveSuggestion (主动建议)
```

---

### 5.4 智能体商店页 (Agent Store)

#### 布局结构
```
+-----------------------------------------------------------------+
|  智能体商店  [我的智能体]                                        |
+-----------------------------------------------------------------+
| [🔍 搜索智能体...] [🔥热门] [💼工作] [🏠生活] [🎨创意]          |
+-----------------------------------------------------------------+
|  热门推荐                                                        |
|  +---------+ +---------+ +---------+ +---------+                |
|  | 💼      | | 🎨      | | 📊      | | 🧘      |                |
|  | 财务助手| | 创意写手| | 数据分析| | 健康顾问|                |
|  | ⭐4.8   | | ⭐4.9   | | ⭐4.7   | | ⭐4.6   |                |
|  | [安装]  | | [安装]  | | [安装]  | | [安装]  |                |
|  +---------+ +---------+ +---------+ +---------+                |
+-----------------------------------------------------------------+
|  我的智能体 (已激活)                                            |
|  +---------------------------------------------------+           |
|  | 💼 财务助手 [已激活]  [配置] [停用]              |           |
|  | 专属财务顾问，帮你管理财务规划                   |           |
|  | 调用次数: 127次 | 最后使用: 2小时前              |           |
|  +---------------------------------------------------+           |
+-----------------------------------------------------------------+
```

---

### 5.5 性格养成系统页 (Personality)

#### 布局结构
```
+-----------------------------------------------------------------+
|  性格养成系统  [保存配置]                                       |
+-----------------------------------------------------------------+
|                                                                 |
|              +--------------------+                            |
|              |                    |                            |
|              |   [伴侣3D/2D形象]   |                            |
|              |    实时预览区域     |                            |
|              |                    |                            |
|              +--------------------+                            |
|                                                                 |
+-----------------------------------------------------------------+
|  性格参数                                                      |
|                                                                 |
|  共情能力                                                      |
|  [低] [━━━━━━━░░░░░░░░░] [高]  设置为 70%                     |
|  决定伴侣对你情绪的敏感度和回应方式                             |
|                                                                 |
|  幽默程度                                                      |
|  [低] [█████████░░░░░] [高]     设置为 85%                     |
|                                                                 |
|  严谨程度                                                      |
|  [低] [██████░░░░░░░] [高]     设置为 55%                     |
|                                                                 |
|  主动程度                                                      |
|  [低] [█████████████░░] [高]    设置为 90%                     |
|                                                                 |
+-----------------------------------------------------------------+
```

#### 性格参数说明
| 参数 | 范围 | 说明 |
|-----|------|------|
| 共情能力 | 0-100% | 对情绪的敏感度和回应方式 |
| 幽默程度 | 0-100% | 回复中的幽默元素多少 |
| 严谨程度 | 0-100% | 回复的正式程度和逻辑性 |
| 主动程度 | 0-100% | 主动发起对话和建议的频率 |

---

### 5.6 设置页 (Settings)

#### 布局结构
```
+-----------------------------------------------------------------+
|  设置                                                          |
+-----------------------------------------------------------------+
|                                                                 |
|  👤 账户管理                                                   |
|  头像 [头像] [更换]                                            |
|  昵称 张三                                                     |
|  邮箱 zhang***@email.com  [修改]                              |
|  [退出登录] [删除账户]                                         |
|                                                                 |
|  🤖 LLM模型配置                                                |
|  主模型 [MiniMax] [切换]                                      |
|  温度值 [0.7] [?]                                              |
|  APIKey [••••••••••••••••] [修改]                             |
|                                                                 |
|  🔒 隐私与安全                                                 |
|  [✓] 本地优先处理敏感数据                                      |
|  [✓] 端到端加密传输                                            |
|  自动记忆保留 [30天 ▾]                                        |
|  [导出所有数据] [清除所有记忆]                                 |
|                                                                 |
|  🎨 外观设置                                                   |
|  主题 [跟随系统] [浅色] [深色]                                 |
|  字体大小 [默认] [大] [特大]                                   |
|  伴侣位置 [左侧] [右侧] [底部]                                 |
|                                                                 |
+-----------------------------------------------------------------+
```

---

## 6. 基础组件设计

### 6.1 Button 组件
```typescript
type ButtonVariant = 'primary' | 'secondary' | 'ghost' | 'danger' | 'success';
type ButtonSize = 'sm' | 'md' | 'lg';

// 样式映射
const buttonStyles = {
  primary: 'bg-primary-500 text-white hover:bg-primary-600 shadow-sm',
  secondary: 'bg-surface-100 text-surface-700 hover:bg-surface-200',
  ghost: 'bg-transparent text-surface-600 hover:bg-surface-100',
  danger: 'bg-error text-white hover:bg-red-600',
};

const buttonSizes = {
  sm: 'h-8 px-3 text-sm rounded-md',
  md: 'h-10 px-4 text-base rounded-lg',
  lg: 'h-12 px-6 text-lg rounded-xl',
};
```

### 6.2 Card 组件
```typescript
type CardVariant = 'elevated' | 'outlined' | 'filled';

const cardStyles = {
  elevated: 'bg-surface-0 shadow-md hover:shadow-lg',
  outlined: 'bg-surface-0 border border-surface-200',
  filled: 'bg-surface-100',
};
```

### 6.3 MessageBubble 组件
```typescript
const messageStyles = {
  user: 'bg-primary-500 text-white rounded-2xl rounded-tr-sm self-end',
  companion: 'bg-surface-100 text-surface-800 rounded-2xl rounded-tl-sm self-start',
};
```

### 6.4 Avatar 组件
```typescript
const avatarSizes = {
  xs: 'w-6 h-6 text-xs',
  sm: 'w-8 h-8 text-sm',
  md: 'w-10 h-10 text-base',
  lg: 'w-12 h-12 text-lg',
  xl: 'w-16 h-16 text-xl',
};

const statusColors = {
  online: 'bg-success',
  offline: 'bg-surface-300',
  busy: 'bg-error',
  away: 'bg-warning',
};
```

---

## 7. 动效指导

### 7.1 动画原则
1. **自然物理** - 使用弹簧动画而非线性动画
2. **及时响应** - 微交互动效 < 100ms
3. **适度克制** - 伴侣情绪动画是主要动效载体
4. **情感化** - 动效传达情绪和状态

### 7.2 关键动效场景

#### 伴侣情绪过渡
| 过渡 | 时长 | 缓动 |
|-----|------|------|
| 平静 -> 开心 | 400ms | spring(1, 80, 12) |
| 平静 -> 关心 | 500ms | easeOut |
| 思考中 | 1000ms | linear (循环) |

#### 消息气泡进入
| 类型 | 时长 | 缓动 |
|-----|------|------|
| 用户消息 | 300ms | spring(1, 80, 10) |
| 伴侣消息 | 300ms | spring(1, 80, 10) |

### 7.3 手势交互
| 手势 | 动作 | 反馈 |
|-----|------|------|
| 点击 | 引起注意 | 伴侣眼睛看向用户 |
| 长按 | 性格测试 | 伴侣好奇表情 |
| 双击 | 点赞 | 伴侣开心跳跃 |
| 左右滑 | 切换情绪 | 伴侣做出相应表情 |

---

## 8. 响应式布局

### 8.1 断点配置
| 断点 | 宽度 | 布局 |
|-----|------|------|
| sm | 640px | 手机横屏 |
| md | 768px | 平板竖屏 |
| lg | 1024px | 平板横屏/小桌面 |
| xl | 1280px | 桌面显示器 |
| 2xl | 1536px | 大屏显示器 |

### 8.2 各尺寸适配
| 元素 | 桌面 (≥1024px) | 平板 (768-1024px) | 移动 (<768px) |
|-----|---------------|------------------|--------------|
| 布局 | 三栏完整 | 双栏+底部伴侣 | 单栏+底部导航 |
| 对话气泡 | 最大宽度600px | 最大宽度500px | 全宽 |
| 伴侣面板 | 右侧固定 | 底部固定 | 浮动/收起 |
| 侧边导航 | 完整显示 | 图标+文字 | 底部Tab |
| 卡片网格 | 4列 | 3列 | 1列 |

---

## 9. 文件结构建议

```
frontend/
├── src/
│   ├── components/
│   │   ├── ui/                    # 基础UI组件 (Radix封装)
│   │   │   ├── Button/
│   │   │   ├── Card/
│   │   │   ├── Input/
│   │   │   ├── Avatar/
│   │   │   └── Modal/
│   │   ├── companion/             # 伴侣相关组件
│   │   │   ├── CompanionAvatar/
│   │   │   ├── EmotionIndicator/
│   │   │   └── CompanionPanel/
│   │   ├── chat/                  # 对话相关组件
│   │   │   ├── MessageBubble/
│   │   │   ├── ChatInput/
│   │   │   └── QuickReplies/
│   │   ├── memory/                # 记忆相关组件
│   │   │   ├── MemoryCard/
│   │   │   └── MemoryFilter/
│   │   ├── schedule/              # 日程相关组件
│   │   │   ├── Calendar/
│   │   │   └── EventCard/
│   │   └── layout/                # 布局组件
│   │       ├── Sidebar/
│   │       ├── TopBar/
│   │       └── AppLayout/
│   ├── screens/
│   │   ├── Home/
│   │   ├── Memories/
│   │   ├── Schedule/
│   │   ├── AgentStore/
│   │   ├── Personality/
│   │   └── Settings/
│   ├── hooks/
│   │   ├── useTheme.ts
│   │   ├── useBreakpoint.ts
│   │   └── useAnimation.ts
│   └── styles/
│       ├── colors.ts
│       ├── typography.ts
│       └── animations.ts
```

---

## 10. 无障碍设计

### 10.1 颜色对比度
- 正文: 4.5:1 (WCAG AA)
- 大字: 3:1 (WCAG AA)

### 10.2 ARIA示例
```typescript
// 伴侣情绪指示
<div role="img" aria-label="伴侣当前情绪：开心" aria-live="polite">
  <CompanionAvatar emotion="happy" />
</div>

// 主动建议弹窗
<div role="alertdialog" aria-modal="true" aria-labelledby="suggestion-title">
  <h2 id="suggestion-title">智能建议</h2>
</div>
```

### 10.3 点击区域
- 最小点击区域: 44x44px (WCAG)

---

## 11. 参考资源

### 设计灵感
- Apple Intelligence - 助手交互设计
- Replika - AI伴侣应用
- Humane Ai Pin - 伴侣设备UI

### 技术参考
- Radix UI Primitives (https://radix-ui.com)
- Tailwind CSS
- Framer Motion / React Spring (动画库)

---

## 12. 相关文档

- `docs/技术文档/ReactNativeDesktop架构设计.md` - 前端架构参考
- `docs/产品文档/产品需求文档PRD.md` - 核心功能需求
- `docs/产品文档/AI伴侣应用产品技术规划与选型.md` - 产品定位
